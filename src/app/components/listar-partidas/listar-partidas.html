<div class="container">
  <h2>Partidas Disponibles</h2>

  @if (errorMessage) {
    <p class="error">{{ errorMessage }}</p>
  }

  @if (partidas.length === 0 && !errorMessage) {
    <p>No hay partidas disponibles en este momento.</p>
  } @else {
    <table>
      <thead>
      <tr>
        <th>ID</th>
        <th>Anfitrión</th>
        <th>Jugadores</th>
        <th>Creado</th>
        <th>Acción</th>
      </tr>
      </thead>
      <tbody>
        @for (partida of partidas; track partida.id) {
          <tr>
            <td>{{ partida.id }}</td>
            <td>{{ partida.anfitrionEmail }}</td>
            <td>{{ partida.totalJugadores }} / {{ partida.maxJugadores }}</td>
            <td>{{ partida.creadoEn | date: 'short' }}</td>
            <td>
              <button (click)="unirsePartida(partida.id)">Unirse</button>
            </td>
          </tr>
        }
      </tbody>
    </table>

    <div class="pagination">
      <button [disabled]="currentPage === 1" (click)="changePage(currentPage - 1)">Anterior</button>
      <span>Página {{ currentPage }} de {{ totalPages }}</span>
      <button [disabled]="currentPage === totalPages" (click)="changePage(currentPage + 1)">Siguiente</button>
    </div>
  }
</div>
